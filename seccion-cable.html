<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sección de Cable – Ohmnio Calc</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <img src="logo.png" alt="Ohmnio Calc" class="logo">
    <h1>Ohmnio Calc</h1>
  </header>
  <nav>
    <a href="index.html">Inicio</a>
    <a href="seccion-cable.html">Sección Cable</a>
    <a href="awg-mm.html">AWG ↔ mm</a>
    <a href="mazo-cables.html">Mazo</a>
    <a href="resistencias.html">Resistencias</a>
    <a href="series-paralelo.html">Serie/Paralelo</a>
    <a href="divisor-tension.html">Divisor Tensión</a>
    <a href="potencia.html">Potencia</a>
    <a href="coste-coche.html">Coste Coche</a>
    <a href="conectores-38999.html">Conectores 38999</a>
  </nav>
  <main>
    <h2>Calculadora de Sección de Cable</h2>
    <p>Introduce los datos para estimar la sección mínima recomendada de un conductor eléctrico según la caída de tensión permitida. Los resultados son orientativos; verifica siempre con la normativa y un profesional.</p>
    <div class="card">
      <form id="seccionForm" onsubmit="calcularSeccion(event)">
        <label for="sistema">Sistema</label>
        <select id="sistema" name="sistema">
          <option value="mono">Monofásica</option>
          <option value="tri">Trifásica</option>
        </select>
        <label for="V">Tensión (V)</label>
        <input type="number" id="V" name="V" value="230" step="any" min="0">
        <label for="kW">Potencia (kW)</label>
        <input type="number" id="kW" name="kW" value="3" step="any" min="0">
        <label for="L">Distancia (m)</label>
        <input type="number" id="L" name="L" value="20" step="any" min="0">
        <label for="cosphi">Cos φ</label>
        <input type="number" id="cosphi" name="cosphi" value="0.95" step="any" min="0" max="1">
        <label for="material">Material</label>
        <select id="material" name="material">
          <option value="cu">Cobre</option>
          <option value="al">Aluminio</option>
        </select>
        <label for="dv">ΔV permitido (%)</label>
        <input type="number" id="dv" name="dv" value="3" step="any" min="0">
        <button type="submit">Calcular sección</button>
      </form>
      <div id="resultado" class="result"></div>
    </div>
  </main>
  <footer>
    &copy; 2025 Ohmnio Calc
  </footer>
  <script>
    function calcularSeccion(event) {
      event.preventDefault();
      const sistema = document.getElementById('sistema').value;
      const V = parseFloat(document.getElementById('V').value);
      const kW = parseFloat(document.getElementById('kW').value);
      const L = parseFloat(document.getElementById('L').value);
      const cosphi = parseFloat(document.getElementById('cosphi').value);
      const material = document.getElementById('material').value;
      const dv = parseFloat(document.getElementById('dv').value);
      if ([V, kW, L, cosphi, dv].some(v => isNaN(v) || v <= 0)) {
        document.getElementById('resultado').innerHTML = '<p>Completa todos los campos con valores positivos.</p>';
        return;
      }
      const rho = material === 'cu' ? 0.0175 : 0.0283;
      const P = kW * 1000;
      const I = sistema === 'mono' ? (P / (V * cosphi)) : (P / (Math.sqrt(3) * V * cosphi));
      const DVv = V * (dv / 100);
      const S_raw = sistema === 'mono' ? ((2 * L * I * rho) / DVv) : ((Math.sqrt(3) * L * I * rho) / DVv);
      const normalizadas = [1.5,2.5,4,6,10,16,25,35,50,70,95,120,150,185,240,300,400];
      let S_norm = normalizadas.find(n => S_raw <= n);
      if (!S_norm) {
        S_norm = Math.ceil(S_raw);
      }
      document.getElementById('resultado').innerHTML =
        '<p><strong>Corriente estimada:</strong> ' + I.toFixed(2) + ' A</p>' +
        '<p><strong>Sección teórica:</strong> ' + S_raw.toFixed(2) + ' mm²</p>' +
        '<p><strong>Sección recomendada:</strong> ' + S_norm + ' mm²</p>' +
        '<p>Valores orientativos; valida siempre con normativa y un técnico.</p>';
    }
  </script>
</body>
</html>